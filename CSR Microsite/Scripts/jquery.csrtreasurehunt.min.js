!function(s,t,e,n){s.csrTreasureHunt=function(t){var e={cookie:"csrth",items:3,quiz:!1,quizanswer:2,quizvideo:!0,videoproperties:{width:420,height:260,videopath:"http://preview-g.starz.com/p/promos/31756/31756_4q_starz_image_spot_600k.mp4",autoplay:!0,poster:"http://assets.starz.com/starzvideoplayer/v1-patch30/Assets/starz_darkBkgd_685x385.jpg",fallbackimg:"http://assets.starz.com/starzvideoplayer/v1-patch30/SiteImagesLib/no-flash-image-980.jpg"},clueClass:"th-clue",buttonClass:"th-cluebtn",popupClass:"th-popup",closeClass:"th-closebtn",quizPopupClass:"th-quiz",videoClass:"th-videodiv",errorClass:"th-errormessage",enterToWinPopup:"th-entertowin",genericPopupClass:"genericTHPopupClass"},o=this;return o.settings={},o.init=function(){o.settings=s.extend(e,t||{}),o.setupAndHide(),o.checkProgress()},o.setupAndHide=function(){for(s("."+o.settings.closeClass).click(o.hidePopup),i=1;i<=o.settings.items;i++)s("."+o.settings.popupClass+i).hide().addClass(o.settings.genericPopupClass),s("."+o.settings.buttonClass+i).hide().attr("t","."+o.settings.popupClass+i),s("."+o.settings.buttonClass+i).click(o.showPopup);o.settings.quiz?(s("."+o.settings.buttonClass+(o.settings.items+1)).hide().attr("t","."+o.settings.quizPopupClass).click(o.showPopup),s("."+o.settings.buttonClass+(o.settings.items+2)).hide().attr("t","."+o.settings.enterToWinPopup).click(o.showPopup)):s("."+o.settings.buttonClass+(o.settings.items+1)).hide().attr("t","."+o.settings.enterToWinPopup).click(o.showPopup),s("."+o.settings.quizPopupClass).hide().addClass(o.settings.genericPopupClass),s("."+o.settings.enterToWinPopup).hide().addClass(o.settings.genericPopupClass)},o.checkProgress=function(){if(o.current=s.cookie("csrth"),o.current==n&&(s.cookie("csrth",1),o.current=1,s("."+o.settings.popupClass+o.current).show()),o.current=Number(o.current),o.current<o.settings.items+1){for(i=1;i<=o.current;i++)s("."+o.settings.buttonClass+i).show();s("."+o.settings.clueClass+o.current).click(o.nextItemFound)}else{for(i=1;i<=o.settings.items+1;i++)s("."+o.settings.buttonClass+i).show();o.settings.quiz?o.loadQuiz():s("."+o.settings.enterToWinPopup).show()}},o.nextItemFound=function(){s("."+o.settings.clueClass+o.current).unbind("click");try{_gaq.push(["_trackEvent","TreasureHunt","ItemFound","Item #"+o.current])}catch(t){}o.current++,s.cookie("csrth",o.current),s("."+o.settings.genericPopupClass).hide(),s("."+o.settings.popupClass+o.current).show(),o.checkProgress()},o.showPopup=function(){s("."+o.settings.genericPopupClass).hide(),s(s(this).attr("t")).show()},o.hidePopup=function(){s("."+o.settings.genericPopupClass).hide()},o.loadQuiz=function(){s("."+o.settings.errorClass).hide();var t=s("."+o.settings.quizPopupClass).show();o.answers=[],t.find("input").each(function(){"submit"==s(this).attr("type")?s(this).click(o.checkQuiz):o.answers.push(s(this))}),o.settings.quizvideo&&o.jsVideo()},o.jsVideo=function(){var t='<div id="StarzVideoPlayerPopup">';t+='<div id="StarzVideoPlayerFallback" class="hidden">',t+='<a href="http://www.adobe.com/go/getflashplayer" target="_blank">',t+='<img src="'+o.settings.videoproperties.fallbackimg+'" alt="Update Flash Player Image" /></a>',t+="</div>",t+="</div>",s("."+o.settings.videoClass).html(t);var e={src:o.settings.videoproperties.videopath,srcApple:o.settings.videoproperties.videopath,ccUri:"",poster:o.settings.videoproperties.poster,width:o.settings.videoproperties.width,height:o.settings.videoproperties.height,autoPlay:o.settings.videoproperties.autoplay,id:o.settings.videoproperties.videoplayerid};starzVideoPlayer2.init(e,!1)},o.checkQuiz=function(){var t=o.answers[o.settings.quizanswer-1].val(),e=s("."+o.settings.quizPopupClass).find("input").filter(":checked").val();t==e?(o.settings.quizvideo&&s("."+o.settings.videoClass).html(""),s("."+o.settings.buttonClass+(o.settings.items+2)).show(),s("."+o.settings.errorClass).hide(),o.current=o.settings.items+2,s.cookie("csrth",o.current),s("."+o.settings.buttonClass+o.current).show(),s("."+o.settings.genericPopupClass).hide(),s("."+o.settings.enterToWinPopup).show()):s("."+o.settings.errorClass).show()},o.init(t),o}}(jQuery,window,document);